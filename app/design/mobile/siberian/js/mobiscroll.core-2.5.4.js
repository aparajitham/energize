(function(e){function t(t,n){function rt(t){if(e.isArray(Q.readonly)){var n=e(".dwwl",f).index(t);return Q.readonly[n]}return Q.readonly}function it(e){var t='<div class="dw-bf">',n=1,r;for(r in Y[e]){if(n%20==0){t+='</div><div class="dw-bf">'}t+='<div class="dw-li dw-v" data-val="'+r+'" style="height:'+i+"px;line-height:"+i+'px;"><div class="dw-i">'+Y[e][r]+"</div></div>";n++}t+="</div>";return t}function st(t){d=e(".dw-li",t).index(e(".dw-v",t).eq(0));v=e(".dw-li",t).index(e(".dw-v",t).eq(-1));S=e(".dw-ul",f).index(t);p=i;m=z;speedUnit=Q.speedUnit}function ot(e){var t=Q.headerText;return t?typeof t==="function"?t.call(X,e):t.replace(/\{value\}/i,e):""}function ut(){z.temp=tt&&z.val!==null&&z.val!=V.val()||z.values===null?Q.parseValue(V.val()||"",z):z.values.slice(0);z.setValue(true)}function at(t,n,r,i,s){if(ct("validate",[f,n,t])!==false){e(".dw-ul",f).each(function(r){var o=e(this),u=e('.dw-li[data-val="'+z.temp[r]+'"]',o),a=e(".dw-li",o),f=a.index(u),l=a.length,c=r==n||n===undefined;if(!u.hasClass("dw-v")){var h=u,p=u,d=0,v=0;while(f-d>=0&&!h.hasClass("dw-v")){d++;h=a.eq(f-d)}while(f+v<l&&!p.hasClass("dw-v")){v++;p=a.eq(f+v)}if((v<d&&v&&i!==2||!d||f-d<0||i==1)&&p.hasClass("dw-v")){u=p;f=f+v}else{u=h;f=f-d}}if(!u.hasClass("dw-sel")||c){z.temp[r]=u.attr("data-val");e(".dw-sel",o).removeClass("dw-sel");u.addClass("dw-sel");z.scroll(o,r,f,c?t:.1,c?s:undefined)}});z.change(r)}}function ft(t){if(Q.display=="inline"||l===e(window).width()&&y===e(window).height()&&t||ct("onPosition",[f])===false){return}var n,r,i,s,o,u,a,c,h,p,d,v,m=0,b=0,w=e(window).scrollTop(),E=e(".dwwr",f),S=e(".dw",f),x={},T=Q.anchor===undefined?V:Q.anchor;l=e(window).width();y=e(window).height();g=window.innerHeight;g=g||y;if(/modal|bubble/.test(Q.display)){e(".dwc",f).each(function(){n=e(this).outerWidth(true);m+=n;b=n>b?n:b});n=m>l?b:m;E.width(n)}A=S.outerWidth();j=S.outerHeight(true);if(Q.display=="modal"){r=(l-A)/2;i=w+(g-j)/2}else if(Q.display=="bubble"){v=true;h=e(".dw-arrw-i",f);u=T.offset();a=u.top;c=u.left;s=T.outerWidth();o=T.outerHeight();r=c-(S.outerWidth(true)-s)/2;r=r>l-A?l-(A+20):r;r=r>=0?r:20;i=a-j;if(i<w||a>w+g){S.removeClass("dw-bubble-top").addClass("dw-bubble-bottom");i=a+o}else{S.removeClass("dw-bubble-bottom").addClass("dw-bubble-top")}p=h.outerWidth();d=c+s/2-(r+(A-p)/2);e(".dw-arr",f).css({left:d>p?p:d})}else{x.width="100%";if(Q.display=="top"){i=w}else if(Q.display=="bottom"){i=w+g-j}}x.top=i<0?0:i;x.left=r;S.css(x);e(".dw-persp",f).height(0).height(i+j>e(document).height()?i+j:e(document).height());if(v&&(i+j>w+g||a>w+g)){e(window).scrollTop(i+j-g)}}function lt(e){if(e.type==="touchstart"){P=true;setTimeout(function(){P=false},500)}else if(P){P=false;return false}return true}function ct(t,r){var i;r.push(z);e.each([J.defaults,G,n],function(e,n){if(n[t]){i=n[t].apply(X,r)}});return i}function ht(e){var t=+e.data("pos"),n=t+1;a(e,n>v?d:n,1,true)}function pt(e){var t=+e.data("pos"),n=t-1;a(e,n<d?v:n,2,true)}var r,i,u,f,l,g,y,A,j,R,U,z=this,W=e.mobiscroll,X=t,V=e(X),J,K,Q=_({},I),G={},Y=[],Z={},et={},tt=V.is("input"),nt=false;z.enable=function(){Q.disabled=false;if(tt){V.prop("disabled",false)}};z.disable=function(){Q.disabled=true;if(tt){V.prop("disabled",true)}};z.scroll=function(e,t,n,s,o){function u(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t}function a(){clearInterval(Z[t]);delete Z[t];e.data("pos",n).closest(".dwwl").removeClass("dwa")}var l=(r-n)*i,c=M.replace(/^\-/,"").replace("moz","Moz"),h=e[0].style,p;if(l==et[t]&&Z[t]){return}if(s&&l!=et[t]){ct("onAnimStart",[f,t,s])}et[t]=l;h[c+"Transition"]="all "+(s?s.toFixed(3):0)+"s ease-out";if(O){h[c+"Transform"]="translate3d(0,"+l+"px,0)"}else{h.top=l+"px"}if(Z[t]){a()}if(s&&o!==undefined){p=0;e.closest(".dwwl").addClass("dwa");Z[t]=setInterval(function(){p+=.1;e.data("pos",Math.round(u(p,o,n-o,s)));if(p>=s){a()}},100)}else{e.data("pos",n)}};z.setValue=function(t,n,r,i){if(!e.isArray(z.temp)){z.temp=Q.parseValue(z.temp+"",z)}if(nt&&t){at(r)}u=Q.formatResult(z.temp);if(!i){z.values=z.temp.slice(0);z.val=u}if(n){if(tt){V.val(u).trigger("change")}}};z.getValues=function(){var e=[],t;for(t in z._selectedValues){e.push(z._selectedValues[t])}return e};z.validate=function(e,t,n,r){at(n,e,true,t,r)};z.change=function(t){u=Q.formatResult(z.temp);if(Q.display=="inline"){z.setValue(false,t)}else{e(".dwv",f).html(ot(u))}if(t){ct("onChange",[u])}};z.changeWheel=function(t,n){if(f){var r=0,i,s,o=t.length;for(i in Q.wheels){for(s in Q.wheels[i]){if(e.inArray(r,t)>-1){Y[r]=Q.wheels[i][s];e(".dw-ul",f).eq(r).html(it(r));o--;if(!o){ft();at(n,undefined,true);return}}r++}}}};z.isVisible=function(){return nt};z.tap=function(e,t){var n,r;if(Q.tap){e.bind("touchstart",function(e){e.preventDefault();n=s(e,"X");r=s(e,"Y")}).bind("touchend",function(e){if(Math.abs(s(e,"X")-n)<20&&Math.abs(s(e,"Y")-r)<20){t.call(this,e)}D=true;setTimeout(function(){D=false},300)})}e.bind("click",function(e){if(!D){t.call(this,e)}})};z.show=function(t){if(Q.disabled||nt){return false}if(Q.display=="top"){R="slidedown"}if(Q.display=="bottom"){R="slideup"}ut();ct("onBeforeShow",[]);var n=0,r,o,h="";if(R&&!t){h="dw-"+R+" dw-in"}var p='<div class="dw-trans '+Q.theme+" dw-"+Q.display+" dw"+M+'">'+(Q.display=="inline"?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp">'+'<div class="dwo"></div><div class="dw dwbg '+h+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(Q.headerText?'<div class="dwv"></div>':""));for(r=0;r<Q.wheels.length;r++){p+='<div class="dwc'+(Q.mode!="scroller"?" dwpm":" dwsc")+(Q.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(o in Q.wheels[r]){Y[n]=Q.wheels[r][o];p+='<td><div class="dwwl dwrc dwwl'+n+'">'+(Q.mode!="scroller"?'<div class="dwwb dwwbp" style="height:'+i+"px;line-height:"+i+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+i+"px;line-height:"+i+'px;"><span>â€“</span></div>':"")+'<div class="dwl">'+o+'</div><div class="dwww"><div class="dww" style="height:'+Q.rows*i+"px;min-width:"+Q.width+'px;"><div class="dw-ul">';p+=it(n);p+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';n++}p+="</tr></table></div></div>"}p+=(Q.display!="inline"?'<div class="dwbc'+(Q.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+Q.setText+"</span></span>"+(Q.button3?'<span class="dwbw dwb-n"><span class="dwb">'+Q.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+Q.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>";f=e(p);at();ct("onMarkupReady",[f]);if(Q.display!="inline"){f.appendTo("body");setTimeout(function(){f.removeClass("dw-trans").find(".dw").removeClass(h)},350)}else if(V.is("div")){V.html(f)}else{f.insertAfter(V)}ct("onMarkupInserted",[f]);nt=true;J.init(f,z);if(Q.display!="inline"){z.tap(e(".dwb-s span",f),function(){if(z.hide(false,"set")!==false){z.setValue(false,true);ct("onSelect",[z.val])}});z.tap(e(".dwb-c span",f),function(){z.cancel()});if(Q.button3){z.tap(e(".dwb-n span",f),Q.button3)}if(Q.scrollLock){f.bind("touchmove",function(e){if(j<=g&&A<=l){e.preventDefault()}})}e("input,select,button").each(function(){if(!e(this).prop("disabled")){e(this).addClass("dwtd").prop("disabled",true)}});ft();e(window).bind("orientationchange.dw resize.dw",function(){clearTimeout(U);U=setTimeout(function(){ft(true)},100)})}f.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!rt(this)){t.preventDefault();t=t.originalEvent;var n=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,r=e(".dw-ul",this),i=+r.data("pos"),s=Math.round(i-n);st(r);a(r,s,n<0?1:2)}}).delegate(".dwb, .dwwb",H,function(t){e(this).addClass("dwb-a")}).delegate(".dwwb",H,function(t){t.stopPropagation();t.preventDefault();var n=e(this).closest(".dwwl");if(lt(t)&&!rt(n)&&!n.hasClass("dwa")){w=true;var r=n.find(".dw-ul"),i=e(this).hasClass("dwwbp")?ht:pt;st(r);clearInterval(c);c=setInterval(function(){i(r)},Q.delay);i(r)}}).delegate(".dwwl",H,function(t){t.preventDefault();if(lt(t)&&!b&&!rt(this)&&!w){b=true;e(document).bind(B,F);E=e(".dw-ul",this);L=Q.mode!="clickpick";C=+E.data("pos");st(E);k=Z[S]!==undefined;x=s(t,"Y");N=new Date;T=x;z.scroll(E,S,C,.001);if(L){E.closest(".dwwl").addClass("dwa")}}});ct("onShow",[f,u])};z.hide=function(t,n){if(!nt||ct("onClose",[u,n])===false){return false}e(".dwtd").prop("disabled",false).removeClass("dwtd");V.blur();if(f){if(Q.display!="inline"&&R&&!t){f.addClass("dw-trans").find(".dw").addClass("dw-"+R+" dw-out");setTimeout(function(){f.remove();f=null},350)}else{f.remove();f=null}nt=false;et={};e(window).unbind(".dw")}};z.cancel=function(){if(z.hide(false,"cancel")!==false){ct("onCancel",[z.val])}};z.init=function(e){J=_({defaults:{},init:h},W.themes[e.theme||Q.theme]);K=W.i18n[e.lang||Q.lang];_(n,e);_(Q,J.defaults,K,n);z.settings=Q;V.unbind(".dw");var t=W.presets[Q.preset];if(t){G=t.call(X,z);_(Q,G,n);_(q,G.methods)}r=Math.floor(Q.rows/2);i=Q.height;R=Q.animate;if(V.data("dwro")!==undefined){X.readOnly=o(V.data("dwro"))}if(nt){z.hide()}if(Q.display=="inline"){z.show()}else{ut();if(tt&&Q.showOnFocus){V.data("dwro",X.readOnly);X.readOnly=true;V.bind("focus.dw",function(){z.show()})}}};z.trigger=function(e,t){return ct(e,t)};z.values=null;z.val=null;z.temp=null;z._selectedValues={};z.init(n)}function n(e){var t;for(t in e){if(A[e[t]]!==undefined){return true}}return false}function r(){var e=["Webkit","Moz","O","ms"],t;for(t in e){if(n([e[t]+"Transform"])){return"-"+e[t].toLowerCase()}}return""}function i(e){return l[e.id]}function s(e,t){var n=e.originalEvent,r=e.changedTouches;return r||n&&n.changedTouches?n?n.changedTouches[0]["page"+t]:r[0]["page"+t]:e["page"+t]}function o(e){return e===true||e=="true"}function u(e,t,n){e=e>n?n:e;e=e<t?t:e;return e}function a(t,n,r,i,s){n=u(n,d,v);var o=e(".dw-li",t).eq(n),a=s===undefined?n:s,f=S,l=i?n==a?.1:Math.abs((n-a)*m.settings.timeUnit):0;m.temp[f]=o.attr("data-val");m.scroll(t,f,n,l,s);setTimeout(function(){m.validate(f,r,l,s)},10)}function f(e,t,n){if(q[t]){return q[t].apply(e,Array.prototype.slice.call(n,1))}if(typeof t==="object"){return q.init.call(e,t)}return e}var l={},c,h=function(){},p,d,v,m,g=new Date,y=g.getTime(),b,w,E,S,x,T,N,C,k,L,A=document.createElement("modernizr").style,O=n(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),M=r(),_=e.extend,D,P,H="touchstart mousedown",B="touchmove mousemove",j="touchend mouseup",F=function(e){if(L){e.preventDefault();T=s(e,"Y");m.scroll(E,S,u(C+(x-T)/p,d-1,v+1))}k=true},I={width:70,height:40,rows:3,delay:300,disabled:false,readonly:false,showOnFocus:true,showLabel:true,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:true,tap:true,speedUnit:.0012,timeUnit:.1,formatResult:function(e){return e.join(" ")},parseValue:function(e,t){var n=t.settings.wheels,r=e.split(" "),i=[],s=0,o,u,a;for(o=0;o<n.length;o++){for(u in n[o]){if(n[o][u][r[s]]!==undefined){i.push(r[s])}else{for(a in n[o][u]){i.push(a);break}}s++}}return i}},q={init:function(e){if(e===undefined){e={}}return this.each(function(){if(!this.id){y+=1;this.id="scoller"+y}l[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=i(this);if(e){e.enable()}})},disable:function(){return this.each(function(){var e=i(this);if(e){e.disable()}})},isDisabled:function(){var e=i(this[0]);if(e){return e.settings.disabled}},isVisible:function(){var e=i(this[0]);if(e){return e.isVisible()}},option:function(e,t){return this.each(function(){var n=i(this);if(n){var r={};if(typeof e==="object"){r=e}else{r[e]=t}n.init(r)}})},setValue:function(e,t,n,r){return this.each(function(){var s=i(this);if(s){s.temp=e;s.setValue(true,t,n,r)}})},getInst:function(){return i(this[0])},getValue:function(){var e=i(this[0]);if(e){return e.values}},getValues:function(){var e=i(this[0]);if(e){return e.getValues()}},show:function(){var e=i(this[0]);if(e){return e.show()}},hide:function(){return this.each(function(){var e=i(this);if(e){e.hide()}})},destroy:function(){return this.each(function(){var t=i(this);if(t){t.hide();e(this).unbind(".dw");delete l[this.id];if(e(this).is("input")){this.readOnly=o(e(this).data("dwro"))}}})}};e(document).bind(j,function(t){if(b){var n=new Date-N,r=u(C+(x-T)/p,d-1,v+1),i,s,o,f=E.offset().top;if(n<300){i=(T-x)/n;s=i*i/m.settings.speedUnit;if(T-x<0){s=-s}}else{s=T-x}o=Math.round(C-s/p);if(!s&&!k){var l=Math.floor((T-f)/p),h=e(".dw-li",E).eq(l),g=L;if(m.trigger("onValueTap",[h])!==false){o=l}else{g=true}if(g){h.addClass("dw-hl");setTimeout(function(){h.removeClass("dw-hl")},200)}}if(L){a(E,o,0,true,Math.round(r))}b=false;E=null;e(document).unbind(B,F)}if(w){clearInterval(c);w=false}e(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(e){if(D){e.stopPropagation();e.preventDefault();return false}});e.fn.mobiscroll=function(t){_(this,e.mobiscroll.shorts);return f(this,t,arguments)};e.mobiscroll=e.mobiscroll||{setDefaults:function(e){_(I,e)},presetShort:function(e){this.shorts[e]=function(t){return f(this,_(t,{preset:e}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}};e.scroller=e.scroller||e.mobiscroll;e.fn.scroller=e.fn.scroller||e.fn.mobiscroll})(jQuery)